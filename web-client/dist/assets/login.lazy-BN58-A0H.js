import{c as u,j as e,P as m,y as p}from"./index-D2oB8Xyz.js";import{b as x,a as h,A as j,I as r,s as a,P as g,g as y,T as f,o as N,c as b,d as l,e as S}from"./index.esm-Dd6_XDeN.js";import{L as c}from"./link-B-D0Gj-y.js";const _=u("/auth/login")({component:T}),v=S`
  mutation Identity__login($input: LoginInput!) {
    identity__login(input: $input) {
      token
    }
  }
`;function T(){var i;const t=x({defaultValues:{},resolver:N(k)}),s=h({mutationFn:n=>y({variables:n,query:v,options:{passAccessToken:!0}}),onSuccess:n=>{var o;f.setToken((o=n==null?void 0:n.identity__login)==null?void 0:o.token)}}),d=n=>{s.mutate({input:n})};return e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsxs(m,{withBorder:!0,p:"lg",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h2",{className:"mt-1 text-2xl",children:"Alapon Chat"}),e.jsx("p",{className:"text-sm text-[#667781] my-3",children:"Access your account by entering your handle and pin code."})]}),s.isError&&e.jsx(j,{color:"red",title:"Hands up",radius:"md",children:(i=s==null?void 0:s.error)==null?void 0:i.message}),e.jsxs("form",{method:"POST",onSubmit:t.handleSubmit(d),className:"flex flex-col gap-4",children:[e.jsx(r.Wrapper,{label:"Your handle",error:e.jsx(a,{errors:t.formState.errors,name:"handle"}),children:e.jsx(r,{leftSection:e.jsx("span",{className:"text-gray-400",children:"@"}),placeholder:"Type your handle",size:"md",...t.register("handle")})}),e.jsx(r.Wrapper,{label:"Pin",error:e.jsx(a,{errors:t.formState.errors,name:"pin"}),description:"The 6 digit pin code for your account login",children:e.jsx(g,{length:6,size:"md",type:"number",onChange:n=>t.setValue("pin",n)})}),e.jsx(p,{type:"submit",loading:s.isPending,children:"Login"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsxs("p",{children:["Don't have an account?"," ",e.jsx(c,{to:"/auth/join",className:"link",children:"Join now"})]}),e.jsxs("p",{children:["Forgot your pin?"," ",e.jsx(c,{to:"/auth/reset-pin",className:"link",children:"Reset it"})]})]})]}),e.jsx("div",{className:"my-4 text-xs text-center text-slate-500",children:e.jsx("p",{children:"version 1.0.5"})})]})}const k=b({handle:l().required().label("Handle"),pin:l().required("Your pin is required").min(6).max(6).label("Pin")});export{_ as Route};
